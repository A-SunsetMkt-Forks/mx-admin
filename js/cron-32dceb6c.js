import{T as p}from"./index-d8deaa0d.js";import{u as c}from"./use-table-277d573d.js";import{d as f,R as o,k as d,h as r,cM as h,a as y,N as C,n as g}from"./index-a65640c4.js";import{t as T}from"./index-137c1f08.js";import{N as k}from"./Popconfirm-2df5e7c0.js";import"./DataTable-55862cb2.js";import"./Icon-16beb9bb.js";import"./Select-1fa08aad.js";import"./Tag-9eca160d.js";import"./Forward-f1d961c0.js";import"./index-5e6b6cfe.js";import"./ChevronRight-d9341cbf.js";import"./Tooltip-2e2a1070.js";import"./transform-e11cca46.js";import"./_arrayEach-2ff48152.js";var _=f({setup(){const{data:s,fetchDataFn:i,loading:n}=c(t=>async()=>{const a=await o.api.health.cron.get();t.value=Array.from(Object.values(a.data).map(e=>({...e,_name:e.name,name:T(e.name)})))});d(async()=>{await i()});const l=async(t,a)=>{await o.api.health.cron.run(t).post();let e=setTimeout(function m(){o.api.health.cron.task(t).get().then(u=>{u.status==="fulfill"?(message.success(`${a} \u6267\u884C\u5B8C\u6210`),e=clearTimeout(e)):u.status==="reject"?(message.error(`${a} \u6267\u884C\u5931\u8D25, `+u.message),e=clearTimeout(e)):e=setTimeout(m,1e3)})},1e3)};return()=>r(g,null,r(p,{noPagination:!0,data:s,loading:n.value,nTableProps:{maxHeight:"calc(100vh - 17rem)"},maxWidth:500,columns:[{title:"\u4EFB\u52A1",key:"name",ellipsis:{tooltip:!0},width:150},{title:"\u63CF\u8FF0",key:"description",width:250,ellipsis:{tooltip:!0}},{title:"\u72B6\u6001",key:"status"},{title:"\u4E0B\u6B21\u6267\u884C",key:"",render(t){const a=t.nextDate;return a?h(new Date(a),"MM/dd/yyyy hh:mm:ss"):"N/A"}},{title:"\u64CD\u4F5C",key:"",render(t){return r(y,null,r(k,{onPositiveClick:()=>void l(t._name,t.name)},{trigger(){return r(C,{size:"tiny",text:!0,type:"success"},"\u6267\u884C")},default:()=>r("span",{class:"max-w-48"},"\u786E\u5B9A\u8981\u6267\u884C?")}))}}]}))}});export{_ as default};
