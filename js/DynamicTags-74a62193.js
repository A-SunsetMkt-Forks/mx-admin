import{t as U,c as j,N as w}from"./Tag-9690fc76.js";import{c1 as W,ba as $,c2 as K,c3 as E,c4 as _,Y as L,d as H,O as M,L as Q,aa as Y,v as h,$ as k,ab as q,ac as G,k as F,Q as J,h as r,a as X,aW as Z,y as ee,N as te,T as ae,a5 as N}from"./index-0227ab67.js";import{A as ne}from"./Add-1f9ab160.js";function se(t){switch(t){case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}}const ie=W({name:"DynamicTags",common:$,peers:{Input:K,Button:E,Tag:U,Space:_},self(){return{inputWidth:"64px"}}});var le=ie,re=L("dynamic-tags",[L("input",{minWidth:"var(--n-input-width)"})]);const ue=Object.assign(Object.assign(Object.assign({},k.props),j),{closable:{type:Boolean,default:!0},defaultValue:{type:Array,default:()=>[]},value:Array,inputStyle:[String,Object],inputProps:Object,max:Number,tagStyle:[String,Object],renderTag:Function,onCreate:{type:Function,default:t=>t},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]});var me=H({name:"DynamicTags",props:ue,setup(t){const{mergedClsPrefixRef:f,inlineThemeDisabled:u}=M(t),{localeRef:o}=Q("DynamicTags"),c=Y(t),{mergedDisabledRef:s}=c,d=h(""),m=h(!1),p=h(!0),v=h(null),y=k("DynamicTags","-dynamic-tags",re,le,t,f),b=h(t.defaultValue),O=q(t,"value"),i=G(O,b),S=F(()=>o.value.add),z=F(()=>se(t.size)),C=F(()=>s.value||!!t.max&&i.value.length>=t.max);function T(e){const{onChange:a,"onUpdate:value":g,onUpdateValue:B}=t,{nTriggerFormInput:x,nTriggerFormChange:P}=c;a&&N(a,e),B&&N(B,e),g&&N(g,e),b.value=e,x(),P()}function I(e){const a=i.value.slice(0);a.splice(e,1),T(a)}function D(e){switch(e.code){case"Enter":case"NumpadEnter":l()}}function l(e){const a=e??d.value;if(a){const g=i.value.slice(0);g.push(a),T(g)}m.value=!1,p.value=!0,d.value=""}function R(){l()}function A(){m.value=!0,Z(()=>{var e;(e=v.value)===null||e===void 0||e.focus(),p.value=!1})}const V=F(()=>{const{self:{inputWidth:e}}=y.value;return{"--n-input-width":e}}),n=u?J("dynamic-tags",void 0,V,t):void 0;return{mergedClsPrefix:f,inputInstRef:v,localizedAdd:S,inputSize:z,inputValue:d,showInput:m,inputForceFocused:p,mergedValue:i,mergedDisabled:s,triggerDisabled:C,handleInputKeyUp:D,handleAddClick:A,handleInputBlur:R,handleCloseClick:I,handleInputConfirm:l,mergedTheme:y,cssVars:u?void 0:V,themeClass:n?.themeClass,onRender:n?.onRender}},render(){const{mergedTheme:t,cssVars:f,mergedClsPrefix:u,onRender:o,renderTag:c}=this;return o?.(),r(X,{class:[`${u}-dynamic-tags`,this.themeClass],size:"small",style:f,theme:t.peers.Space,themeOverrides:t.peerOverrides.Space,itemStyle:"display: flex;"},{default:()=>{const{mergedTheme:s,tagStyle:d,type:m,round:p,size:v,color:y,closable:b,mergedDisabled:O,showInput:i,inputValue:S,inputStyle:z,inputSize:C,inputForceFocused:T,triggerDisabled:I,handleInputKeyUp:D,handleInputBlur:l,handleAddClick:R,handleCloseClick:A,handleInputConfirm:V,$slots:n}=this;return this.mergedValue.map((e,a)=>c?c(e,a):r(w,{key:a,theme:s.peers.Tag,themeOverrides:s.peerOverrides.Tag,style:d,type:m,round:p,size:v,color:y,closable:b,disabled:O,onClose:()=>A(a)},{default:()=>typeof e=="string"?e:e.label})).concat(i?n.input?n.input({submit:V,deactivate:l}):r(ee,Object.assign({placeholder:"",size:C,style:z,autosize:!0},this.inputProps,{ref:"inputInstRef",value:S,onUpdateValue:e=>{this.inputValue=e},theme:s.peers.Input,themeOverrides:s.peerOverrides.Input,onKeyup:D,onBlur:l,internalForceFocus:T})):n.trigger?n.trigger({activate:R,disabled:I}):r(te,{dashed:!0,disabled:I,theme:s.peers.Button,themeOverrides:s.peerOverrides.Button,size:C,onClick:R},{icon:()=>r(ae,{clsPrefix:u},{default:()=>r(ne,null)})}))}})}});export{me as N};
