import{d as b,co as s,r as f,w as g,h as a,$ as v,bh as h,ba as c,b8 as p,J as y}from"./vendor-a7b34205.js";import{u as S,a as w,T}from"./use-async-monaco-35b689e3.js";import{a as C,R as E}from"./index-66557411.js";import{E as i}from"./types-4fa065e6.js";import"./index-76d8504b.js";import"./use-save-confirm-3e742716.js";import"./editor.main-759b9211.js";const M=t=>{switch(t){case"objectId":return((o=Math,l=Date,n=16,r=u=>o.floor(u).toString(n))=>r(l.now()/1e3)+" ".repeat(n).replace(/./g,()=>r(o.random()*n)))();case"now":return new Date().toISOString();case"randomtext":return btoa(Math.random().toString()).substring(10,5);case"randomnumber":return Math.floor(Math.random()*1e4);default:return"{{"+t+"}}"}};var B=b({setup(){const t=s("debug-event-name",i.POST_CREATE),o=s("debug-event",{}),l=s("debug-event-type","web"),n=S({value:o.value[t.value]??""}),r=f();g(()=>t.value,e=>{u.editor.setValue(o.value[e]||"")});const u=w(r,n,e=>{o.value={...o.value,[t.value]:e}},{language:"json",unSaveConfirm:!1}),d=async()=>{const e=o.value[t.value]?.replace(/(\{\{(.*?)\}\})/g,(N,D,m)=>M(m))??"";console.log(e),E.api.debug.events.post({params:{type:l.value,event:t.value},data:JSON.parse(e)})};return()=>a(C,null,a(T,null,a(v,{span:"12"},a(h,null,a(c,{label:"Type"},a(p,{tag:!0,filterable:!0,value:l.value,onUpdateValue:e=>void(l.value=e),options:["web","all","admin"].map(e=>({value:e,label:e}))})),a(c,{label:"Event"},a(p,{tag:!0,filterable:!0,value:t.value,onUpdateValue:e=>void(t.value=e),options:Object.keys(i).map(e=>({value:e,label:e}))}))),a("div",null,a(y,{type:"primary",onClick:d},"\u6D4B\u8BD5"))),a(v,{span:"24"},a("div",{class:"h-[calc(100vh-20rem)] relative"},a("div",{ref:r,class:"h-full"})))))}});export{B as default};
