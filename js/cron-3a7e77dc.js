import{T as c}from"./index-bfc15a67.js";import{u as p}from"./use-table-86e8e7b0.js";import{R as n,a as f}from"./index-66557411.js";import{t as d}from"./index-aa130b0b.js";import{d as h,o as y,h as u,aL as C,L as g,b1 as T,J as x}from"./vendor-a7b34205.js";var w=h({setup(){const{data:r,fetchDataFn:o,loading:i}=p(e=>async()=>{const a=await n.api.health.cron.get();e.value=Array.from(Object.values(a.data).map(t=>({...t,_name:t.name,name:d(t.name)})))});y(async()=>{await o()});const l=async(e,a)=>{await n.api.health.cron.run(e).post();let t=setTimeout(function m(){n.api.health.cron.task(e).get().then(s=>{s.status==="fulfill"?(message.success(`${a} \u6267\u884C\u5B8C\u6210`),t=clearTimeout(t)):s.status==="reject"?(message.error(`${a} \u6267\u884C\u5931\u8D25, `+s.message),t=clearTimeout(t)):t=setTimeout(m,1e3)})},1e3)};return()=>u(f,null,u(c,{noPagination:!0,data:r,loading:i.value,nTableProps:{maxHeight:"calc(100vh - 17rem)"},maxWidth:500,columns:[{title:"\u4EFB\u52A1",key:"name",ellipsis:{tooltip:!0},width:150},{title:"\u63CF\u8FF0",key:"description",width:250,ellipsis:{tooltip:!0}},{title:"\u72B6\u6001",key:"status"},{title:"\u4E0B\u6B21\u6267\u884C",key:"",render(e){const a=e.nextDate;return a?C(new Date(a),"MM/dd/yyyy hh:mm:ss"):"N/A"}},{title:"\u64CD\u4F5C",key:"",render(e){return u(g,null,u(T,{onPositiveClick:()=>void l(e._name,e.name)},{trigger(){return u(x,{size:"tiny",text:!0,type:"success"},"\u6267\u884C")},default:()=>u("span",{class:"max-w-48"},"\u786E\u5B9A\u8981\u6267\u884C?")}))}}]}))}});export{w as default};
