import{d as I,h as e,c2 as Oe,bb as Ce,c3 as De,c4 as Pe,dl as Se,L as Ve,Q as ae,z as c,$ as U,a1 as re,a0 as xe,aa as Ne,P as Ue,c9 as Te,x as B,T as $,ae as Re,a2 as be,l as j,a3 as je,S as Ke,O as Le,N as O,V as se,Y as _,dm as _e,bR as Me,dn as H,bj as G,aO as $e,a8 as W,a4 as ie,dp as ze,dq as J,dr as Ge,b$ as qe,k as X,H as He,ds as We,w as K,j as ye,m as te,dt as Z,a as ee,bV as M,F as ue,R as S,U as he,cw as Qe,J as Ye,I as Je,cp as Xe,bT as Ze,bU as ea,du as aa,v as ge,dv as ta,bk as ua,u as la,dw as na,cQ as oa,cP as ra,i as sa,n as ia}from"./index-a65640c4.js";import{R as Ee}from"./relative-time-76b5cd59.js";import{H as pe}from"./rounded-button-0a332d37.js";import{d as Fe}from"./index-137c1f08.js";import{a as pa,f as da,N as r}from"./FormItem-e5a28df6.js";import{_ as de}from"./CheckCircleOutlined-e80d11fd.js";import{i as q}from"./isEmpty-c84f1110.js";import{b as ca,o as ma}from"./omit-cd9fa3f3.js";import{N as we,a as w}from"./CollapseItem-2ed55296.js";import{N as F}from"./Form-8fe34e05.js";import{N as Q}from"./DynamicTags-b1b77781.js";import{N as C}from"./Switch-36a3e36a.js";import{R as va,N as fa}from"./InputNumber-0adca50a.js";import{A as ba,a as ya}from"./DataTable-55862cb2.js";import{N as ha}from"./Popconfirm-2df5e7c0.js";import{N as ga}from"./DatePicker-d4cdefea.js";import{A as ce}from"./Add-594e9d88.js";import{N as Ea}from"./Select-1fa08aad.js";import{N as Fa,a as Y}from"./Tabs-680d8f27.js";import"./transform-e11cca46.js";import"./_arrayEach-2ff48152.js";import"./index-5e6b6cfe.js";import"./ChevronRight-d9341cbf.js";import"./Tag-9eca160d.js";import"./Icon-16beb9bb.js";import"./Forward-f1d961c0.js";import"./Tooltip-2e2a1070.js";import"./throttle-f7c0b27f.js";var wa=1,Ba=4;function Be(u){return ca(u,wa|Ba)}var Ia=I({name:"ArrowUp",render(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},e("g",{fill:"none"},e("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}});const Aa=()=>Se,ka=Oe({name:"DynamicInput",common:Ce,peers:{Input:De,Button:Pe},self:Aa});var Oa=ka;const le=Ve("n-dynamic-input");var Ca=I({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:u,placeholderRef:m}=ae(le);return{mergedTheme:u,placeholder:m}},render(){const{mergedTheme:u,placeholder:m,value:a,clsPrefix:s,onUpdateValue:l}=this;return e("div",{class:`${s}-dynamic-input-preset-input`},e(c,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:a,placeholder:m,onUpdateValue:l}))}}),Da=I({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(u){const{mergedThemeRef:m,keyPlaceholderRef:a,valuePlaceholderRef:s}=ae(le);return{mergedTheme:m,keyPlaceholder:a,valuePlaceholder:s,handleKeyInput(l){u.onUpdateValue({key:l,value:u.value.value})},handleValueInput(l){u.onUpdateValue({key:u.value.key,value:l})}}},render(){const{mergedTheme:u,keyPlaceholder:m,valuePlaceholder:a,value:s,clsPrefix:l}=this;return e("div",{class:`${l}-dynamic-input-preset-pair`},e(c,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:s.key,class:`${l}-dynamic-input-pair-input`,placeholder:m,onUpdateValue:this.handleKeyInput}),e(c,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:s.value,class:`${l}-dynamic-input-pair-input`,placeholder:a,onUpdateValue:this.handleValueInput}))}}),Pa=U("dynamic-input",{width:"100%"},[U("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[U("dynamic-input-preset-input",{flex:1,alignItems:"center"}),U("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[U("dynamic-input-pair-input",[re("&:first-child",{"margin-right":"12px"})])]),xe("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[Ne("icon",{cursor:"pointer"})]),re("&:last-child",{marginBottom:0})]),U("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[U("form-item-blank",{paddingTop:"0 !important"})])]);const z=new WeakMap,Sa=Object.assign(Object.assign({},be.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]});var Va=I({name:"DynamicInput",props:Sa,setup(u,{slots:m}){const{mergedComponentPropsRef:a,mergedClsPrefixRef:s,inlineThemeDisabled:l}=Ue(),i=ae(Te,null),n=B(u.defaultValue),h=$(u,"value"),d=Re(h,n),v=be("DynamicInput","-dynamic-input",Pa,Oa,u,s),t=j(()=>{const{value:o}=d;if(Array.isArray(o)){const{max:p}=u;return p!==void 0&&o.length>=p}return!1}),E=j(()=>{const{value:o}=d;return Array.isArray(o)?o.length<=u.min:!0}),A=j(()=>{var o,p;return(p=(o=a?.value)===null||o===void 0?void 0:o.DynamicInput)===null||p===void 0?void 0:p.buttonSize});function k(o){const{onInput:p,"onUpdate:value":b,onUpdateValue:f}=u;p&&W(p,o),b&&W(b,o),f&&W(f,o),n.value=o}function V(o,p){if(o==null||typeof o!="object")return p;const b=H(o)?G(o):o;let f=z.get(b);return f===void 0&&z.set(b,f=$e()),f}function x(o,p){const{value:b}=d,f=Array.from(b??[]),D=f[o];if(f[o]=p,D&&p&&typeof D=="object"&&typeof p=="object"){const Ae=H(D)?G(D):D,ke=H(p)?G(p):p,oe=z.get(Ae);oe!==void 0&&z.set(ke,oe)}k(f)}function L(){N(0)}function N(o){const{value:p}=d,{onCreate:b}=u,f=Array.from(p??[]);if(b)f.splice(o+1,0,b(o+1)),k(f);else if(m.default)f.splice(o+1,0,null),k(f);else switch(u.preset){case"input":f.splice(o+1,0,""),k(f);break;case"pair":f.splice(o+1,0,{key:"",value:""}),k(f);break}}function y(o){const{value:p}=d;if(!Array.isArray(p))return;const{min:b}=u;if(p.length<=b)return;const f=Array.from(p);f.splice(o,1),k(f);const{onRemove:D}=u;D&&D(o)}function T(o,p,b){if(p<0||b<0||p>=o.length||b>=o.length||p===b)return;const f=o[p];o[p]=o[b],o[b]=f}function Ie(o,p){const{value:b}=d;if(!Array.isArray(b))return;const f=Array.from(b);o==="up"&&T(f,p,p-1),o==="down"&&T(f,p,p+1),k(f)}je(le,{mergedThemeRef:v,keyPlaceholderRef:$(u,"keyPlaceholder"),valuePlaceholderRef:$(u,"valuePlaceholder"),placeholderRef:$(u,"placeholder")});const ne=j(()=>{const{self:{actionMargin:o}}=v.value;return{"--action-margin":o}}),R=l?Ke("dynamic-input",void 0,ne,u):void 0;return{locale:Le("DynamicInput").localeRef,buttonSize:A,mergedClsPrefix:s,NFormItem:i,uncontrolledValue:n,mergedValue:d,insertionDisabled:t,removeDisabled:E,handleCreateClick:L,ensureKey:V,handleValueChange:x,remove:y,move:Ie,createItem:N,mergedTheme:v,cssVars:l?void 0:ne,themeClass:R?.themeClass,onRender:R?.onRender}},render(){const{$slots:u,buttonSize:m,mergedClsPrefix:a,mergedValue:s,locale:l,mergedTheme:i,keyField:n,itemStyle:h,preset:d,showSortButton:v,NFormItem:t,ensureKey:E,handleValueChange:A,remove:k,createItem:V,move:x,onRender:L}=this;return L?.(),e("div",{class:[`${a}-dynamic-input`,this.themeClass],style:this.cssVars},!Array.isArray(s)||s.length===0?e(O,Object.assign({block:!0,ghost:!0,dashed:!0,size:m},this.createButtonProps,{disabled:this.insertionDisabled,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>se(u["create-button-default"],()=>[l.create]),icon:()=>se(u["create-button-icon"],()=>[e(_,{clsPrefix:a},{default:()=>e(ce,null)})])}):s.map((N,y)=>e("div",{key:n?N[n]:E(N,y),"data-key":n?N[n]:E(N,y),class:`${a}-dynamic-input-item`,style:h},_e(u.default,{value:s[y],index:y},()=>[d==="input"?e(Ca,{clsPrefix:a,value:s[y],parentPath:t?t.path.value:void 0,path:t?.path.value?`${t.path.value}[${y}]`:void 0,onUpdateValue:T=>A(y,T)}):d==="pair"?e(Da,{clsPrefix:a,value:s[y],parentPath:t?t.path.value:void 0,path:t?.path.value?`${t.path.value}[${y}]`:void 0,onUpdateValue:T=>A(y,T)}):null]),e("div",{class:`${a}-dynamic-input-item__action`},e(Me,{size:m},{default:()=>[e(O,{disabled:this.removeDisabled,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,circle:!0,onClick:()=>k(y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(va,null)})}),e(O,{disabled:this.insertionDisabled,circle:!0,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:()=>V(y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(ce,null)})}),v?e(O,{disabled:y===0,circle:!0,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:()=>x("up",y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(Ia,null)})}):null,v?e(O,{disabled:y===s.length-1,circle:!0,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:()=>x("down",y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(ba,null)})}):null]})))))}});const xa=Object.assign(Object.assign({},Ge),pa);var P=I({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:xa,setup(){const u=B(null);return{formItemInstRef:u,validate:(...s)=>{const{value:l}=u;if(l)return l.validate(...s)},restoreValidation:()=>{const{value:s}=u;if(s)return s.restoreValidation()}}},render(){return e(J,ie(this.$.vnode.props||{},ze),{default:()=>{const u=ie(this.$props,da);return e(r,Object.assign({ref:"formItemInstRef"},u),this.$slots)}})}});const Na="mt-6",Ua={class:Na,labelPlacement:"left",labelAlign:"right",labelWidth:150,autocomplete:"chrome-off"},g={autosize:!0,clearable:!0,style:"min-width: 300px; max-width: 100%"},Ta=I(()=>{const{setHeaderButtons:u}=qe();X(()=>{u(e(pe,{disabled:!0,onClick:l,icon:e(de,null)}))}),He(()=>{u(null)});let m={};const a=B(me({})),s=B({});K(()=>a.value,t=>{s.value=Fe(m,G(t))},{deep:!0}),K(()=>s.value,t=>{let E=!1;q(t)?E=!1:E=!0,u(e(pe,{disabled:!E,icon:e(de,null),onClick:l}))});async function l(){if(q(s.value))return;const t=Object.entries(s.value);for await(const[E,A]of t){const k=Object.fromEntries(Object.entries(A).map(([V,x])=>Array.isArray(x)?[V,a.value[E][V]]:[V,x]));await S.api.options(E).patch({data:k})}await i(),message.success("\u4FEE\u6539\u6210\u529F")}const i=async()=>{let t=await S.api.options.get();t=me(ma(t,["ok"])),m=Be(t),a.value=t};X(()=>{i()});const n=B(["website"]),h=ye(he),d=j(()=>h.viewport.value.mobile?1:2),v=te(Ua);return K(()=>h.viewport.value.mobile,t=>{t?(v.labelPlacement="top",v.labelAlign="left"):(v.labelPlacement="left",v.labelAlign="right")},{immediate:!0}),()=>e(ue,null,e("div",{class:"pt-4"}),e(we,{accordion:!0,displayDirective:"if",expandedNames:n.value,onUpdateExpandedNames:t=>{n.value=t}},e(w,{title:"\u7F51\u7AD9\u8BBE\u7F6E",name:"website"},e(F,{...v},e(Z,{cols:d.value,xGap:12},e(P,{span:1,label:"\u524D\u7AEF\u5730\u5740"},e(c,{value:a.value.url.webUrl,onInput:t=>void(a.value.url.webUrl=t)})),e(P,{span:1,label:"API \u5730\u5740"},e(c,{value:a.value.url.serverUrl,onInput:t=>void(a.value.url.serverUrl=t)})),e(P,{span:1,label:"\u540E\u53F0\u5730\u5740"},e(c,{value:a.value.url.adminUrl,onInput:t=>void(a.value.url.adminUrl=t)})),e(P,{span:1,label:"Gateway \u5730\u5740"},e(c,{value:a.value.url.wsUrl,onInput:t=>void(a.value.url.wsUrl=t)}))))),e(w,{title:"SEO \u4F18\u5316",name:"seo"},e(F,{...v},e(r,{label:"\u7F51\u7AD9\u6807\u9898"},e(c,{...g,value:a.value.seo.title,onInput:t=>void(a.value.seo.title=t)})),e(r,{label:"\u7F51\u7AD9\u63CF\u8FF0"},e(c,{...g,value:a.value.seo.description,onInput:t=>void(a.value.seo.description=t)})),e(r,{label:"\u5173\u952E\u5B57"},e(Q,{round:!0,type:"primary",value:a.value.seo.keywords,onUpdateValue:t=>void(a.value.seo.keywords=t)})))),e(w,{title:"\u540E\u53F0\u9644\u52A0\u8BBE\u7F6E",name:"adminExtra"},e(F,{...v},e(r,{label:"\u5F00\u542F\u540E\u53F0\u7BA1\u7406\u53CD\u4EE3"},e(C,{value:a.value.adminExtra.enableAdminProxy,onUpdateValue:t=>void(a.value.adminExtra.enableAdminProxy=t)})),e(r,{label:"\u4E2D\u540E\u53F0\u6807\u9898"},e(c,{...g,value:a.value.adminExtra.title,onUpdateValue:t=>void(a.value.adminExtra.title=t)})),e(r,{label:"\u767B\u5F55\u9875\u9762\u80CC\u666F"},e(c,{...g,value:a.value.adminExtra.background,inputProps:{autocomplete:"off"},onUpdateValue:t=>void(a.value.adminExtra.background=t)})),e(r,{label:"\u9AD8\u5FB7\u67E5\u8BE2 API Key"},e(c,{...g,value:a.value.adminExtra.gaodemapKey,type:"password",showPasswordOn:"click",clearable:!0,inputProps:{autocomplete:"off"},onUpdateValue:t=>{a.value.adminExtra.gaodemapKey=t}})))),e(w,{title:"\u8BC4\u8BBA\u8BBE\u7F6E",name:"comment"},e(F,{...v},e(r,{label:"\u53CD\u5783\u573E\u8BC4\u8BBA"},e(C,{value:a.value.commentOptions.antiSpam,onUpdateValue:t=>void(a.value.commentOptions.antiSpam=t)})),e(r,{label:"\u81EA\u5B9A\u4E49\u5C4F\u853D\u5173\u952E\u8BCD"},e(Q,{disabled:!a.value.commentOptions.antiSpam,value:a.value.commentOptions.spamKeywords,onUpdateValue:t=>void(a.value.commentOptions.spamKeywords=t),type:"primary"})),e(r,{label:"\u81EA\u5B9A\u4E49\u5C4F\u853D IP"},e(Q,{disabled:!a.value.commentOptions.antiSpam,value:a.value.commentOptions.blockIps,onUpdateValue:t=>void(a.value.commentOptions.blockIps=t),type:"primary"})),e(r,{label:"\u7981\u6B62\u975E\u4E2D\u6587\u8BC4\u8BBA"},e(C,{value:a.value.commentOptions.disableNoChinese,onUpdateValue:t=>void(a.value.commentOptions.disableNoChinese=t)})))),e(w,{title:"\u53CB\u94FE\u8BBE\u7F6E",name:"friendLink"},e(F,{...v},e(r,{label:"\u662F\u5426\u5141\u8BB8\u7533\u8BF7\u53CB\u94FE"},e(C,{value:a.value.friendLinkOptions.allowApply,onUpdateValue:t=>void(a.value.friendLinkOptions.allowApply=t)})))),e(w,{title:"\u90AE\u4EF6\u901A\u77E5\u8BBE\u7F6E",name:"mail"},e(F,{...v},e(r,{label:"\u5F00\u542F\u90AE\u7BB1\u63D0\u9192"},e(C,{value:a.value.mailOptions.enable,onUpdateValue:t=>void(a.value.mailOptions.enable=t)})),e(Z,{cols:d.value,xGap:12},e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1 host"},e(c,{value:a.value.mailOptions.options?.host||"",onInput:t=>{a.value.mailOptions.options||(a.value.mailOptions.options={}),a.value.mailOptions.options.host=t}})),e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1\u7AEF\u53E3"},e(fa,{value:a.value.mailOptions.options?.port||465,onUpdateValue:t=>{a.value.mailOptions.options||(a.value.mailOptions.options={}),a.value.mailOptions.options.port=t??465}})),e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740"},e(c,{value:a.value.mailOptions.user,onInput:t=>void(a.value.mailOptions.user=t)})),e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1\u5BC6\u7801"},e(c,{type:"password",showPasswordOn:"click",inputProps:{name:"email-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},value:a.value.mailOptions.pass,onInput:t=>void(a.value.mailOptions.pass=t)}))))),e(w,{name:"backup",title:"\u5907\u4EFD"},e(F,{...v},e(r,{label:"\u5F00\u542F\u81EA\u52A8\u5907\u4EFD"},e(ee,{vertical:!0},e(C,{value:a.value.backupOptions.enable,onUpdateValue:t=>void(a.value.backupOptions.enable=t)}),e(M,{class:"text-xs",depth:3},"\u586B\u5199\u4EE5\u4E0B COS \u4FE1\u606F, \u5C06\u540C\u65F6\u4E0A\u4F20\u5907\u4EFD\u5230 COS"))),e(r,{label:"\u5730\u57DF Region"},e(c,{...g,value:a.value.backupOptions.region,onInput:t=>void(a.value.backupOptions.region=t)})),e(r,{label:"SecretId"},e(c,{...g,value:a.value.backupOptions.secretId,onInput:t=>void(a.value.backupOptions.secretId=t)})),e(r,{label:"SecretKey"},e(c,{...g,type:"password",inputProps:{name:"secret-key-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},showPasswordOn:"click",value:a.value.backupOptions.secretKey,onInput:t=>void(a.value.backupOptions.secretKey=t)})))),e(w,{name:"baidu_push",title:"\u767E\u5EA6\u63A8\u9001"},e(F,{...v},e(r,{label:"\u5F00\u542F\u63A8\u9001"},e(C,{value:a.value.baiduSearchOptions.enable,onUpdateValue:t=>void(a.value.baiduSearchOptions.enable=t)})),e(r,{label:"Token",path:"baidu_push"},e(c,{...g,showPasswordOn:"click",type:"password",inputProps:{name:"baidu-push-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},disabled:!a.value.baiduSearchOptions.enable,value:a.value.baiduSearchOptions.token,onUpdateValue:t=>void(a.value.baiduSearchOptions.token=t)})))),e(w,{name:"algolia",title:"Algolia Search"},e(F,{...v},e(r,{label:"\u5F00\u542F Algolia Search"},e(C,{value:a.value.algoliaSearchOptions.enable,onUpdateValue:t=>void(a.value.algoliaSearchOptions.enable=t)})),e(r,{label:"AppId"},e(c,{...g,disabled:!a.value.algoliaSearchOptions.enable,value:a.value.algoliaSearchOptions.appId,onInput:t=>void(a.value.algoliaSearchOptions.appId=t)})),e(r,{label:"apiKey"},e(c,{...g,type:"password",disabled:!a.value.algoliaSearchOptions.enable,value:a.value.algoliaSearchOptions.apiKey,onInput:t=>void(a.value.algoliaSearchOptions.apiKey=t)})),e(r,{label:"indexName"},e(c,{...g,disabled:!a.value.algoliaSearchOptions.enable,value:a.value.algoliaSearchOptions.indexName,onInput:t=>void(a.value.algoliaSearchOptions.indexName=t)})))),e(w,{name:"terminal",title:"\u7EC8\u7AEF\u8BBE\u5B9A"},e(F,{...v},e(r,{label:"\u5F00\u542F WebShell"},e(C,{value:a.value.terminalOptions.enable,onUpdateValue:t=>void(a.value.terminalOptions.enable=t)})),e(r,{label:"\u8BBE\u5B9A\u5BC6\u7801"},e(c,{...g,value:a.value.terminalOptions.password,showPasswordOn:"click",type:"password",inputProps:{name:"xterm-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},onUpdateValue:t=>void(a.value.terminalOptions.password=t)}),e(M,{class:"ml-4 text-xs",depth:3},"\u5BC6\u7801\u4E3A\u7A7A\u5219\u4E0D\u542F\u7528\u5BC6\u7801\u9A8C\u8BC1")),e(r,{label:"\u9884\u5148\u6267\u884C\u547D\u4EE4"},e(c,{type:"textarea",autosize:{minRows:4},value:a.value.terminalOptions.script,onUpdateValue:t=>void(a.value.terminalOptions.script=t)}))))),e(M,{class:"ml-4 mt-8 text-xs inline-block",depth:3},"* \u654F\u611F\u5B57\u6BB5\u4E0D\u663E\u793A\uFF0C\u540E\u7AEF\u9ED8\u8BA4\u4E0D\u8FD4\u56DE\u654F\u611F\u5B57\u6BB5\uFF0C\u663E\u793A\u4E3A\u7A7A"))});function me(u){return We({seo:{title:"",description:"",keywords:[]},url:{wsUrl:"",adminUrl:"",serverUrl:"",webUrl:""},mailOptions:{user:"",pass:"",options:{host:"",port:465},enable:!1},commentOptions:{antiSpam:!1,spamKeywords:[],blockIps:[],disableNoChinese:!1},backupOptions:{enable:!1,secretId:"",secretKey:"",bucket:"",region:""},baiduSearchOptions:{enable:!1,token:""},algoliaSearchOptions:{enable:!1},adminExtra:{enableAdminProxy:!1,background:"",gaodemapKey:"",title:"\u9759\u304B\u306A\u68EE"},terminalOptions:{enable:!1,script:""},friendLinkOptions:{allowApply:!0}},u)}const Ra=I(()=>()=>e(ue,null,e("div",{class:"pt-4"}),e(we,{defaultExpandedNames:["reset"],displayDirective:"if"},e(w,{name:"reset",title:"\u4FEE\u6539\u5BC6\u7801"},e(Ka,null)),e(w,{name:"token",title:"API Token"},e(ja,null))))),ja=I(()=>{const u=B([]),m=()=>({name:"",expired:!1,expiredTime:new Date}),a=te(m()),s=async()=>{const{data:d}=await S.api.auth.token.get();u.value=d};Qe(()=>{s()});const l=B(!1),i=async()=>{const d={name:a.name,expired:a.expired?a.expiredTime.toISOString():void 0},v=await S.api.auth.token.post({data:d});await navigator.clipboard.writeText(v.token),l.value=!1;const t=m();for(const A in t)a[A]=t[A];message.success("\u751F\u6210\u6210\u529F, Token \u5DF2\u590D\u5236, "+v.token),await s();const E=u.value.findIndex(A=>A.name===d.name);E!==-1&&(u.value[E].token=v.token)},n=async d=>{await S.api.auth.token.delete({params:{id:d}}),message.success("\u5220\u9664\u6210\u529F");const v=u.value.findIndex(t=>t.id===d);v!=-1&&u.value.splice(v,1)},h=ye(he);return()=>e(aa,{class:"!overflow-visible"},e(Ze,{transformOrigin:"center",show:l.value,onUpdateShow:d=>void(l.value=d)},e(ea,{bordered:!1,title:"\u521B\u5EFA Token",class:"max-w-full w-[500px]"},e(F,null,e(r,{label:"\u540D\u79F0",required:!0},e(c,{value:a.name,onInput:d=>void(a.name=d)})),e(r,{label:"\u662F\u5426\u8FC7\u671F"},e(C,{value:a.expired,onUpdateValue:d=>void(a.expired=d)})),e(r,{label:"\u8FC7\u671F\u65F6\u95F4"},e(ga,{disabled:!a.expired,value:a.expiredTime,type:"datetime",onUpdateValue:d=>void(a.expiredTime=new Date(d))}))),e(ee,null,e(O,{round:!0,onClick:()=>void(l.value=!1)},"\u53D6\u6D88"),e(O,{round:!0,type:"primary",onClick:i},"\u786E\u5B9A")))),e(O,{class:"absolute right-0 top-[-3rem]",round:!0,type:"primary",onClick:()=>{l.value=!0}},e(Je,null,e(Xe,null)),e("span",{class:"ml-2"},"\u65B0\u589E")),e(ya,{scrollX:Math.max(800,h.contentWidth.value-h.contentInsetWidth.value),remote:!0,bordered:!1,data:u.value,columns:[{key:"name",title:"\u540D\u79F0"},{key:"token",title:"Token",render({token:d}){return d??"*".repeat(40)}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"created",render({created:d}){return e(Ee,{time:d})}},{title:"\u8FC7\u671F\u65F6\u95F4",key:"expired",render({expired:d}){return Ye(d,"yyyy\u5E74M\u6708d\u65E5 HH:mm:ss")}},{title:"\u64CD\u4F5C",key:"id",render({id:d,name:v}){return e(ee,null,e(ha,{positiveText:"\u53D6\u6D88",negativeText:"\u5220\u9664",onNegativeClick:()=>{n(d)}},{trigger:()=>e(O,{text:!0,type:"error"},"\u5220\u9664"),default:()=>e("span",{class:"max-w-48"},'\u786E\u5B9A\u8981\u5220\u9664 Token "',v,'"?')}))}}]}))}),Ka=I(()=>{const u=te({password:"",reenteredPassword:""}),m=B(),a=ge(),s=async()=>{!m.value||m.value.validate(async i=>{i?console.log(i):(await S.api.master.patch({data:{password:u.password}}),message.success("\u66F4\u6539\u6210\u529F"),ta(),a.push({name:ua.Login}))})};function l(i,n){return console.log(i),n===u.password}return()=>e(F,{class:"max-w-[300px]",ref:m,model:u,rules:{password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],reenteredPassword:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",trigger:["input","blur"]},{validator:l,message:"\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4",trigger:["blur","password-input"]}]}},e(r,{label:"\u65B0\u5BC6\u7801",required:!0,path:"password"},e(c,{...g,value:u.password,onInput:i=>void(u.password=i),type:"password"})),e(r,{label:"\u91CD\u590D\u5BC6\u7801",required:!0,path:"reenteredPassword"},e(c,{...g,value:u.reenteredPassword,onInput:i=>void(u.reenteredPassword=i),type:"password"})),e("div",{class:"w-full text-right"},e(O,{onClick:s,type:"primary",round:!0},"\u4FDD\u5B58")))}),La=I({props:{value:{type:Object,required:!0},onChange:{type:Function,required:!0},options:{type:Array,required:!1}},setup(u){let m=q(u.value)?null:u.value;const a=K(()=>u.value,l=>{if(!m&&l){const i=Object.entries(l).map(([n,h])=>({key:n,value:h.toString()}));s.value=i,a()}}),s=B([]);return K(()=>s.value,l=>{const i=l.reduce((n,h)=>(h.key===""&&h.value===""||(n[h.key]=h.value.toString()),n),{});u.onChange(i)},{deep:!0}),()=>e(Va,{value:s.value,onUpdateValue:l=>{s.value=(()=>{const i=l.findIndex(n=>n===null);return i!==-1&&l.splice(i,1,{key:"",value:""}),l})()}},{default(l){return e("div",{class:"flex items-center w-full"},e(Ea,{class:"mr-4",filterable:!0,tag:!0,placeholder:"\u8BF7\u9009\u62E9",value:l.value.key,onUpdateValue:i=>{l.value.key=i},options:u.options}),e(c,{value:l.value.value.toString(),onUpdateValue:i=>{l.value.value=i}}))}})}}),ve={GitHub:"github",Weibo:"weibo",\u7F51\u6613\u4E91:"netease",\u54D4\u54E9\u54D4\u54E9:"bilibili"},_a="_avatar_7rrjr_3";var fe={"tab-user":"_tab-user_7rrjr_1",avatar:_a};const Ma=I(()=>{const u=B({});let m;async function a(){const n=await S.api.master.get();u.value=n,m={...n}}X(async()=>{await a()});const s=la(),l=j(()=>Fe(m,u.value)),i=async()=>{const n=Be(ra(l));n.socialIds&&(n.socialIds=u.value.socialIds),await S.api.master.patch({data:n}),s.success("\u4FDD\u5B58\u6210\u529F~"),await a()};return()=>e(ue,null,e(Z,{cols:"1 400:1 600:2",class:fe["tab-user"],xGap:20,yGap:20},e(J,null,e(F,{class:"flex flex-col justify-center items-center "},e(r,null,e("div",{class:fe.avatar},e(na,{src:u.value.avatar,size:200}))),e(r,{label:"\u4E0A\u6B21\u767B\u9646\u65F6\u95F4",class:"!mt-4"},e("div",{class:"text-center w-full"},e(M,null,u.value.lastLoginTime?e(Ee,{time:u.value.lastLoginTime}):"N/A"))),e(r,{label:"\u4E0A\u6B21\u767B\u9646\u5730\u5740"},e("div",{class:"text-center w-full"},u.value.lastLoginIp?e(oa,{trigger:"hover",ip:u.value.lastLoginIp,triggerEl:e(M,{class:"cursor-pointer"},u.value.lastLoginIp)}):"N/A")),e(r,null,e(O,{round:!0,class:"-mt-14",type:"primary",onClick:i,disabled:q(l.value)},"\u4FDD\u5B58")))),e(J,null,e(F,null,e(r,{label:"\u4E3B\u4EBA\u540D (username)"},e(c,{value:u.value.username,onInput:n=>{u.value.username=n?.trim()||""}})),e(r,{label:"\u4E3B\u4EBA\u6635\u79F0 (name)"},e(c,{value:u.value.name,onInput:n=>{u.value.name=n?.trim()||""}})),e(r,{label:"\u4E3B\u4EBA\u90AE\u7BB1 (mail)"},e(c,{value:u.value.mail,onInput:n=>{u.value.mail=n}})),e(r,{label:"\u4E2A\u4EBA\u9996\u9875"},e(c,{value:u.value.url,onInput:n=>{u.value.url=n}})),e(r,{label:"\u5934\u50CF"},e(c,{value:u.value.avatar,onInput:n=>{u.value.avatar=n}})),e(r,{label:"\u4E2A\u4EBA\u4ECB\u7ECD"},e(c,{type:"textarea",resizable:!1,value:u.value.introduce,onInput:n=>{u.value.introduce=n}})),e(r,{label:"\u793E\u4EA4\u5E73\u53F0 ID \u5F55\u5165"},e(La,{options:Object.keys(ve).map(n=>({label:n,value:ve[n]})),onChange:n=>{u.value.socialIds=n},value:u.value.socialIds||{}}))))))});var yt=I({setup(){const u=sa(),m=ge(),a=B(u.params.type);K(()=>u.params.type,l=>{!l||(a.value=l)});const s=B(null);return()=>e(ia,{actionsElement:s.value},e(Fa,{value:a.value,onUpdateValue:l=>{m.replace({...u,params:{...u.params,type:l}})}},e(Y,{tab:"\u7528\u6237",name:"user"},e(Ma,null)),e(Y,{tab:"\u7CFB\u7EDF",name:"system"},e(Ta,null)),e(Y,{tab:"\u5B89\u5168",name:"security"},e(Ra,null))))}});export{yt as default};
