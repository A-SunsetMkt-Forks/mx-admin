import{d as A,h as e,c2 as De,bb as Pe,c3 as Se,c4 as Ve,dp as xe,L as Ne,Q as ae,z as c,$ as x,a1 as se,a0 as Ue,aa as Te,P as Re,c9 as je,x as I,T as $,ae as Ke,a2 as ye,l as T,a3 as Le,ai as _e,S as Me,O as $e,N as C,V as ie,Y as _,dq as ze,dr as H,bj as G,aO as Ge,a8 as W,a4 as pe,ds as qe,dt as Q,du as He,b$ as We,k as X,H as Ye,dv as Je,w as R,j as he,m as te,dw as Z,a as ee,bW as M,F as ue,R as S,U as ge,cA as Qe,J as Xe,I as Ze,ct as ea,bT as aa,bV as ta,dx as ua,v as Ee,dy as la,bk as na,u as oa,dz as ra,cT as sa,cf as ia,i as pa,n as da}from"./index-703972d3.js";import{R as Fe}from"./relative-time-3ef2561c.js";import{H as de}from"./rounded-button-31fc7a7e.js";import{d as we}from"./index-4c6d1694.js";import{a as ca,f as ma,N as r}from"./FormItem-a10558b4.js";import{_ as ce}from"./CheckCircleOutlined-138f058b.js";import{i as q}from"./isEmpty-3fb8ca3f.js";import{b as va,o as fa}from"./omit-3c34502a.js";import{N as Be,a as B}from"./CollapseItem-f878f1c6.js";import{N as E}from"./Form-249453f6.js";import{N as Y}from"./DynamicTags-150986e6.js";import{N as k}from"./Switch-1c5d8d17.js";import{R as ba,N as ya}from"./InputNumber-36a2a564.js";import{A as ha,a as ga}from"./DataTable-50ed6cfd.js";import{N as Ea}from"./Popconfirm-b4080c7f.js";import{N as Fa}from"./DatePicker-b23e391f.js";import{A as me}from"./Add-ee1a21b4.js";import{N as wa}from"./ButtonGroup-971dbc56.js";import{N as Ba}from"./Select-c2e1cbd3.js";import{N as Ia,a as J}from"./Tabs-045c3144.js";import"./transform-418b22dd.js";import"./_arrayEach-2ff48152.js";import"./index-1a30543b.js";import"./ChevronRight-87e44aef.js";import"./Tag-c770bd2c.js";import"./Icon-b872f170.js";import"./Forward-6424dbea.js";import"./Tooltip-b592c6a8.js";import"./throttle-3595fdec.js";var Aa=1,Oa=4;function Ie(u){return va(u,Aa|Oa)}var ka=A({name:"ArrowUp",render(){return e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},e("g",{fill:"none"},e("path",{d:"M3.13 9.163a.5.5 0 1 0 .74.674L9.5 3.67V17.5a.5.5 0 0 0 1 0V3.672l5.63 6.165a.5.5 0 0 0 .738-.674l-6.315-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.131 9.163z",fill:"currentColor"})))}});const Ca=()=>xe,Da=De({name:"DynamicInput",common:Pe,peers:{Input:Se,Button:Ve},self:Ca});var Pa=Da;const le=Ne("n-dynamic-input");var Sa=A({name:"DynamicInputInputPreset",props:{clsPrefix:{type:String,required:!0},value:{type:String,default:""},parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(){const{mergedThemeRef:u,placeholderRef:v}=ae(le);return{mergedTheme:u,placeholder:v}},render(){const{mergedTheme:u,placeholder:v,value:a,clsPrefix:s,onUpdateValue:l}=this;return e("div",{class:`${s}-dynamic-input-preset-input`},e(c,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:a,placeholder:v,onUpdateValue:l}))}}),Va=A({name:"DynamicInputPairPreset",props:{clsPrefix:{type:String,required:!0},value:{type:Object,default:()=>({key:"",value:""})},parentPath:String,path:String,onUpdateValue:{type:Function,required:!0}},setup(u){const{mergedThemeRef:v,keyPlaceholderRef:a,valuePlaceholderRef:s}=ae(le);return{mergedTheme:v,keyPlaceholder:a,valuePlaceholder:s,handleKeyInput(l){u.onUpdateValue({key:l,value:u.value.value})},handleValueInput(l){u.onUpdateValue({key:u.value.key,value:l})}}},render(){const{mergedTheme:u,keyPlaceholder:v,valuePlaceholder:a,value:s,clsPrefix:l}=this;return e("div",{class:`${l}-dynamic-input-preset-pair`},e(c,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:s.key,class:`${l}-dynamic-input-pair-input`,placeholder:v,onUpdateValue:this.handleKeyInput}),e(c,{theme:u.peers.Input,"theme-overrides":u.peerOverrides.Input,value:s.value,class:`${l}-dynamic-input-pair-input`,placeholder:a,onUpdateValue:this.handleValueInput}))}}),xa=x("dynamic-input",{width:"100%"},[x("dynamic-input-item",`
 margin-bottom: 10px;
 display: flex;
 flex-wrap: nowrap;
 `,[x("dynamic-input-preset-input",{flex:1,alignItems:"center"}),x("dynamic-input-preset-pair",`
 flex: 1;
 display: flex;
 align-items: center;
 `,[x("dynamic-input-pair-input",[se("&:first-child",{"margin-right":"12px"})])]),Ue("action",`
 align-self: flex-start;
 display: flex;
 justify-content: flex-end;
 flex-shrink: 0;
 flex-grow: 0;
 margin: var(--action-margin);
 `,[Te("icon",{cursor:"pointer"})]),se("&:last-child",{marginBottom:0})]),x("form-item",`
 padding-top: 0 !important;
 margin-right: 0 !important;
 `,[x("form-item-blank",{paddingTop:"0 !important"})])]);const z=new WeakMap,Na=Object.assign(Object.assign({},ye.props),{max:Number,min:{type:Number,default:0},value:Array,defaultValue:{type:Array,default:()=>[]},preset:{type:String,default:"input"},keyField:String,itemStyle:[String,Object],keyPlaceholder:{type:String,default:""},valuePlaceholder:{type:String,default:""},placeholder:{type:String,default:""},showSortButton:Boolean,createButtonProps:Object,onCreate:Function,onRemove:Function,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onClear:Function,onInput:[Function,Array]});var Ua=A({name:"DynamicInput",props:Na,setup(u,{slots:v}){const{mergedComponentPropsRef:a,mergedClsPrefixRef:s,mergedRtlRef:l,inlineThemeDisabled:i}=Re(),n=ae(je,null),h=I(u.defaultValue),m=$(u,"value"),d=Ke(m,h),t=ye("DynamicInput","-dynamic-input",xa,Pa,u,s),F=T(()=>{const{value:o}=d;if(Array.isArray(o)){const{max:p}=u;return p!==void 0&&o.length>=p}return!1}),O=T(()=>{const{value:o}=d;return Array.isArray(o)?o.length<=u.min:!0}),j=T(()=>{var o,p;return(p=(o=a?.value)===null||o===void 0?void 0:o.DynamicInput)===null||p===void 0?void 0:p.buttonSize});function w(o){const{onInput:p,"onUpdate:value":b,onUpdateValue:f}=u;p&&W(p,o),b&&W(b,o),f&&W(f,o),h.value=o}function V(o,p){if(o==null||typeof o!="object")return p;const b=H(o)?G(o):o;let f=z.get(b);return f===void 0&&z.set(b,f=Ge()),f}function K(o,p){const{value:b}=d,f=Array.from(b??[]),D=f[o];if(f[o]=p,D&&p&&typeof D=="object"&&typeof p=="object"){const ke=H(D)?G(D):D,Ce=H(p)?G(p):p,re=z.get(ke);re!==void 0&&z.set(Ce,re)}w(f)}function N(){y(0)}function y(o){const{value:p}=d,{onCreate:b}=u,f=Array.from(p??[]);if(b)f.splice(o+1,0,b(o+1)),w(f);else if(v.default)f.splice(o+1,0,null),w(f);else switch(u.preset){case"input":f.splice(o+1,0,""),w(f);break;case"pair":f.splice(o+1,0,{key:"",value:""}),w(f);break}}function L(o){const{value:p}=d;if(!Array.isArray(p))return;const{min:b}=u;if(p.length<=b)return;const f=Array.from(p);f.splice(o,1),w(f);const{onRemove:D}=u;D&&D(o)}function ne(o,p,b){if(p<0||b<0||p>=o.length||b>=o.length||p===b)return;const f=o[p];o[p]=o[b],o[b]=f}function Ae(o,p){const{value:b}=d;if(!Array.isArray(b))return;const f=Array.from(b);o==="up"&&ne(f,p,p-1),o==="down"&&ne(f,p,p+1),w(f)}Le(le,{mergedThemeRef:t,keyPlaceholderRef:$(u,"keyPlaceholder"),valuePlaceholderRef:$(u,"valuePlaceholder"),placeholderRef:$(u,"placeholder")});const Oe=_e("DynamicInput",l,s),oe=T(()=>{const{self:{actionMargin:o,actionMarginRtl:p}}=t.value;return{"--action-margin":o,"--action-margin-rtl":p}}),U=i?Me("dynamic-input",void 0,oe,u):void 0;return{locale:$e("DynamicInput").localeRef,rtlEnabled:Oe,buttonSize:j,mergedClsPrefix:s,NFormItem:n,uncontrolledValue:h,mergedValue:d,insertionDisabled:F,removeDisabled:O,handleCreateClick:N,ensureKey:V,handleValueChange:K,remove:L,move:Ae,createItem:y,mergedTheme:t,cssVars:i?void 0:oe,themeClass:U?.themeClass,onRender:U?.onRender}},render(){const{$slots:u,buttonSize:v,mergedClsPrefix:a,mergedValue:s,locale:l,mergedTheme:i,keyField:n,itemStyle:h,preset:m,showSortButton:d,NFormItem:t,ensureKey:F,handleValueChange:O,remove:j,createItem:w,move:V,onRender:K}=this;return K?.(),e("div",{class:[`${a}-dynamic-input`,this.rtlEnabled&&`${a}-dynamic-input--rtl`,this.themeClass],style:this.cssVars},!Array.isArray(s)||s.length===0?e(C,Object.assign({block:!0,ghost:!0,dashed:!0,size:v},this.createButtonProps,{disabled:this.insertionDisabled,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:this.handleCreateClick}),{default:()=>ie(u["create-button-default"],()=>[l.create]),icon:()=>ie(u["create-button-icon"],()=>[e(_,{clsPrefix:a},{default:()=>e(me,null)})])}):s.map((N,y)=>e("div",{key:n?N[n]:F(N,y),"data-key":n?N[n]:F(N,y),class:`${a}-dynamic-input-item`,style:h},ze(u.default,{value:s[y],index:y},()=>[m==="input"?e(Sa,{clsPrefix:a,value:s[y],parentPath:t?t.path.value:void 0,path:t?.path.value?`${t.path.value}[${y}]`:void 0,onUpdateValue:L=>O(y,L)}):m==="pair"?e(Va,{clsPrefix:a,value:s[y],parentPath:t?t.path.value:void 0,path:t?.path.value?`${t.path.value}[${y}]`:void 0,onUpdateValue:L=>O(y,L)}):null]),e("div",{class:`${a}-dynamic-input-item__action`},e(wa,{size:v},{default:()=>[e(C,{disabled:this.removeDisabled,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,circle:!0,onClick:()=>j(y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(ba,null)})}),e(C,{disabled:this.insertionDisabled,circle:!0,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:()=>w(y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(me,null)})}),d?e(C,{disabled:y===0,circle:!0,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:()=>V("up",y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(ka,null)})}):null,d?e(C,{disabled:y===s.length-1,circle:!0,theme:i.peers.Button,themeOverrides:i.peerOverrides.Button,onClick:()=>V("down",y)},{icon:()=>e(_,{clsPrefix:a},{default:()=>e(ha,null)})}):null]})))))}});const Ta=Object.assign(Object.assign({},He),ca);var P=A({__GRID_ITEM__:!0,name:"FormItemGridItem",alias:["FormItemGi"],props:Ta,setup(){const u=I(null);return{formItemInstRef:u,validate:(...s)=>{const{value:l}=u;if(l)return l.validate(...s)},restoreValidation:()=>{const{value:s}=u;if(s)return s.restoreValidation()}}},render(){return e(Q,pe(this.$.vnode.props||{},qe),{default:()=>{const u=pe(this.$props,ma);return e(r,Object.assign({ref:"formItemInstRef"},u),this.$slots)}})}});const Ra="mt-6",ja={class:Ra,labelPlacement:"left",labelAlign:"right",labelWidth:150,autocomplete:"chrome-off"},g={autosize:!0,clearable:!0,style:"min-width: 300px; max-width: 100%"},Ka=A(()=>{const{setHeaderButtons:u}=We();X(()=>{u(e(de,{disabled:!0,onClick:l,icon:e(ce,null)}))}),Ye(()=>{u(null)});let v={};const a=I(ve({})),s=I({});R(()=>a.value,t=>{s.value=we(v,G(t))},{deep:!0}),R(()=>s.value,t=>{let F=!1;q(t)?F=!1:F=!0,u(e(de,{disabled:!F,icon:e(ce,null),onClick:l}))});async function l(){if(q(s.value))return;const t=Object.entries(s.value);for await(const[F,O]of t){const j=Object.fromEntries(Object.entries(O).map(([w,V])=>Array.isArray(V)?[w,a.value[F][w]]:[w,V]));await S.api.options(F).patch({data:j})}await i(),message.success("\u4FEE\u6539\u6210\u529F")}const i=async()=>{let t=await S.api.options.get();t=ve(fa(t,["ok"])),v=Ie(t),a.value=t};X(()=>{i()});const n=I(["website"]),h=he(ge),m=T(()=>h.viewport.value.mobile?1:2),d=te(ja);return R(()=>h.viewport.value.mobile,t=>{t?(d.labelPlacement="top",d.labelAlign="left"):(d.labelPlacement="left",d.labelAlign="right")},{immediate:!0}),()=>e(ue,null,e("div",{class:"pt-4"}),e(Be,{accordion:!0,displayDirective:"if",expandedNames:n.value,onUpdateExpandedNames:t=>{n.value=t}},e(B,{title:"\u7F51\u7AD9\u8BBE\u7F6E",name:"website"},e(E,{...d},e(Z,{cols:m.value,xGap:12},e(P,{span:1,label:"\u524D\u7AEF\u5730\u5740"},e(c,{value:a.value.url.webUrl,onInput:t=>void(a.value.url.webUrl=t)})),e(P,{span:1,label:"API \u5730\u5740"},e(c,{value:a.value.url.serverUrl,onInput:t=>void(a.value.url.serverUrl=t)})),e(P,{span:1,label:"\u540E\u53F0\u5730\u5740"},e(c,{value:a.value.url.adminUrl,onInput:t=>void(a.value.url.adminUrl=t)})),e(P,{span:1,label:"Gateway \u5730\u5740"},e(c,{value:a.value.url.wsUrl,onInput:t=>void(a.value.url.wsUrl=t)}))))),e(B,{title:"SEO \u4F18\u5316",name:"seo"},e(E,{...d},e(r,{label:"\u7F51\u7AD9\u6807\u9898"},e(c,{...g,value:a.value.seo.title,onInput:t=>void(a.value.seo.title=t)})),e(r,{label:"\u7F51\u7AD9\u63CF\u8FF0"},e(c,{...g,value:a.value.seo.description,onInput:t=>void(a.value.seo.description=t)})),e(r,{label:"\u5173\u952E\u5B57"},e(Y,{round:!0,type:"primary",value:a.value.seo.keywords,onUpdateValue:t=>void(a.value.seo.keywords=t)})))),e(B,{title:"\u540E\u53F0\u9644\u52A0\u8BBE\u7F6E",name:"adminExtra"},e(E,{...d},e(r,{label:"\u5F00\u542F\u540E\u53F0\u7BA1\u7406\u53CD\u4EE3"},e(k,{value:a.value.adminExtra.enableAdminProxy,onUpdateValue:t=>void(a.value.adminExtra.enableAdminProxy=t)})),e(r,{label:"\u4E2D\u540E\u53F0\u6807\u9898"},e(c,{...g,value:a.value.adminExtra.title,onUpdateValue:t=>void(a.value.adminExtra.title=t)})),e(r,{label:"\u767B\u5F55\u9875\u9762\u80CC\u666F"},e(c,{...g,value:a.value.adminExtra.background,inputProps:{autocomplete:"off"},onUpdateValue:t=>void(a.value.adminExtra.background=t)})),e(r,{label:"\u9AD8\u5FB7\u67E5\u8BE2 API Key"},e(c,{...g,value:a.value.adminExtra.gaodemapKey,type:"password",showPasswordOn:"click",clearable:!0,inputProps:{autocomplete:"off"},onUpdateValue:t=>{a.value.adminExtra.gaodemapKey=t}})))),e(B,{title:"\u6587\u672C\u8BBE\u7F6E",name:"text"},e(E,{...d},e(r,{label:"\u6587\u672C\u5B8F\u66FF\u6362"},e(k,{value:a.value.textOptions.macros,onUpdateValue:t=>void(a.value.textOptions.macros=t)})))),e(B,{title:"\u8BC4\u8BBA\u8BBE\u7F6E",name:"comment"},e(E,{...d},e(r,{label:"\u53CD\u5783\u573E\u8BC4\u8BBA"},e(k,{value:a.value.commentOptions.antiSpam,onUpdateValue:t=>void(a.value.commentOptions.antiSpam=t)})),e(r,{label:"\u81EA\u5B9A\u4E49\u5C4F\u853D\u5173\u952E\u8BCD"},e(Y,{disabled:!a.value.commentOptions.antiSpam,value:a.value.commentOptions.spamKeywords,onUpdateValue:t=>void(a.value.commentOptions.spamKeywords=t),type:"primary"})),e(r,{label:"\u81EA\u5B9A\u4E49\u5C4F\u853D IP"},e(Y,{disabled:!a.value.commentOptions.antiSpam,value:a.value.commentOptions.blockIps,onUpdateValue:t=>void(a.value.commentOptions.blockIps=t),type:"primary"})),e(r,{label:"\u7981\u6B62\u975E\u4E2D\u6587\u8BC4\u8BBA"},e(k,{value:a.value.commentOptions.disableNoChinese,onUpdateValue:t=>void(a.value.commentOptions.disableNoChinese=t)})))),e(B,{title:"\u53CB\u94FE\u8BBE\u7F6E",name:"friendLink"},e(E,{...d},e(r,{label:"\u662F\u5426\u5141\u8BB8\u7533\u8BF7\u53CB\u94FE"},e(k,{value:a.value.friendLinkOptions.allowApply,onUpdateValue:t=>void(a.value.friendLinkOptions.allowApply=t)})))),e(B,{title:"\u90AE\u4EF6\u901A\u77E5\u8BBE\u7F6E",name:"mail"},e(E,{...d},e(r,{label:"\u5F00\u542F\u90AE\u7BB1\u63D0\u9192"},e(k,{value:a.value.mailOptions.enable,onUpdateValue:t=>void(a.value.mailOptions.enable=t)})),e(Z,{cols:m.value,xGap:12},e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1 host"},e(c,{value:a.value.mailOptions.options?.host||"",onInput:t=>{a.value.mailOptions.options||(a.value.mailOptions.options={}),a.value.mailOptions.options.host=t}})),e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1\u7AEF\u53E3"},e(ya,{value:a.value.mailOptions.options?.port||465,onUpdateValue:t=>{a.value.mailOptions.options||(a.value.mailOptions.options={}),a.value.mailOptions.options.port=t??465}})),e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1\u5730\u5740"},e(c,{value:a.value.mailOptions.user,onInput:t=>void(a.value.mailOptions.user=t)})),e(P,{span:1,label:"\u53D1\u4EF6\u90AE\u7BB1\u5BC6\u7801"},e(c,{type:"password",showPasswordOn:"click",inputProps:{name:"email-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},value:a.value.mailOptions.pass,onInput:t=>void(a.value.mailOptions.pass=t)}))))),e(B,{name:"backup",title:"\u5907\u4EFD"},e(E,{...d},e(r,{label:"\u5F00\u542F\u81EA\u52A8\u5907\u4EFD"},e(ee,{vertical:!0},e(k,{value:a.value.backupOptions.enable,onUpdateValue:t=>void(a.value.backupOptions.enable=t)}),e(M,{class:"text-xs",depth:3},"\u586B\u5199\u4EE5\u4E0B COS \u4FE1\u606F, \u5C06\u540C\u65F6\u4E0A\u4F20\u5907\u4EFD\u5230 COS"))),e(r,{label:"\u5730\u57DF Region"},e(c,{...g,value:a.value.backupOptions.region,onInput:t=>void(a.value.backupOptions.region=t)})),e(r,{label:"SecretId"},e(c,{...g,value:a.value.backupOptions.secretId,onInput:t=>void(a.value.backupOptions.secretId=t)})),e(r,{label:"SecretKey"},e(c,{...g,type:"password",inputProps:{name:"secret-key-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},showPasswordOn:"click",value:a.value.backupOptions.secretKey,onInput:t=>void(a.value.backupOptions.secretKey=t)})))),e(B,{name:"baidu_push",title:"\u767E\u5EA6\u63A8\u9001"},e(E,{...d},e(r,{label:"\u5F00\u542F\u63A8\u9001"},e(k,{value:a.value.baiduSearchOptions.enable,onUpdateValue:t=>void(a.value.baiduSearchOptions.enable=t)})),e(r,{label:"Token",path:"baidu_push"},e(c,{...g,showPasswordOn:"click",type:"password",inputProps:{name:"baidu-push-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},disabled:!a.value.baiduSearchOptions.enable,value:a.value.baiduSearchOptions.token,onUpdateValue:t=>void(a.value.baiduSearchOptions.token=t)})))),e(B,{name:"algolia",title:"Algolia Search"},e(E,{...d},e(r,{label:"\u5F00\u542F Algolia Search"},e(k,{value:a.value.algoliaSearchOptions.enable,onUpdateValue:t=>void(a.value.algoliaSearchOptions.enable=t)})),e(r,{label:"AppId"},e(c,{...g,disabled:!a.value.algoliaSearchOptions.enable,value:a.value.algoliaSearchOptions.appId,onInput:t=>void(a.value.algoliaSearchOptions.appId=t)})),e(r,{label:"apiKey"},e(c,{...g,type:"password",disabled:!a.value.algoliaSearchOptions.enable,value:a.value.algoliaSearchOptions.apiKey,onInput:t=>void(a.value.algoliaSearchOptions.apiKey=t)})),e(r,{label:"indexName"},e(c,{...g,disabled:!a.value.algoliaSearchOptions.enable,value:a.value.algoliaSearchOptions.indexName,onInput:t=>void(a.value.algoliaSearchOptions.indexName=t)})))),e(B,{name:"terminal",title:"\u7EC8\u7AEF\u8BBE\u5B9A"},e(E,{...d},e(r,{label:"\u5F00\u542F WebShell"},e(k,{value:a.value.terminalOptions.enable,onUpdateValue:t=>void(a.value.terminalOptions.enable=t)})),e(r,{label:"\u8BBE\u5B9A\u5BC6\u7801"},e(c,{...g,value:a.value.terminalOptions.password,showPasswordOn:"click",type:"password",inputProps:{name:"xterm-password",autocomplete:"new-password",autocapitalize:"off",autocorrect:"off"},onUpdateValue:t=>void(a.value.terminalOptions.password=t)}),e(M,{class:"ml-4 text-xs",depth:3},"\u5BC6\u7801\u4E3A\u7A7A\u5219\u4E0D\u542F\u7528\u5BC6\u7801\u9A8C\u8BC1")),e(r,{label:"\u9884\u5148\u6267\u884C\u547D\u4EE4"},e(c,{type:"textarea",autosize:{minRows:4},value:a.value.terminalOptions.script,onUpdateValue:t=>void(a.value.terminalOptions.script=t)}))))),e(M,{class:"ml-4 mt-8 text-xs inline-block",depth:3},"* \u654F\u611F\u5B57\u6BB5\u4E0D\u663E\u793A\uFF0C\u540E\u7AEF\u9ED8\u8BA4\u4E0D\u8FD4\u56DE\u654F\u611F\u5B57\u6BB5\uFF0C\u663E\u793A\u4E3A\u7A7A"))});function ve(u){return Je({seo:{title:"",description:"",keywords:[]},url:{wsUrl:"",adminUrl:"",serverUrl:"",webUrl:""},mailOptions:{user:"",pass:"",options:{host:"",port:465},enable:!1},commentOptions:{antiSpam:!1,spamKeywords:[],blockIps:[],disableNoChinese:!1},backupOptions:{enable:!1,secretId:"",secretKey:"",bucket:"",region:""},baiduSearchOptions:{enable:!1,token:""},algoliaSearchOptions:{enable:!1},adminExtra:{enableAdminProxy:!1,background:"",gaodemapKey:"",title:"\u9759\u304B\u306A\u68EE"},terminalOptions:{enable:!1,script:""},friendLinkOptions:{allowApply:!0},textOptions:{macros:!1}},u)}const La=A(()=>()=>e(ue,null,e("div",{class:"pt-4"}),e(Be,{defaultExpandedNames:["reset"],displayDirective:"if"},e(B,{name:"reset",title:"\u4FEE\u6539\u5BC6\u7801"},e(Ma,null)),e(B,{name:"token",title:"API Token"},e(_a,null))))),_a=A(()=>{const u=I([]),v=()=>({name:"",expired:!1,expiredTime:new Date}),a=te(v()),s=async()=>{const{data:m}=await S.api.auth.token.get();u.value=m};Qe(()=>{s()});const l=I(!1),i=async()=>{const m={name:a.name,expired:a.expired?a.expiredTime.toISOString():void 0},d=await S.api.auth.token.post({data:m});await navigator.clipboard.writeText(d.token),l.value=!1;const t=v();for(const O in t)a[O]=t[O];message.success("\u751F\u6210\u6210\u529F, Token \u5DF2\u590D\u5236, "+d.token),await s();const F=u.value.findIndex(O=>O.name===m.name);F!==-1&&(u.value[F].token=d.token)},n=async m=>{await S.api.auth.token.delete({params:{id:m}}),message.success("\u5220\u9664\u6210\u529F");const d=u.value.findIndex(t=>t.id===m);d!=-1&&u.value.splice(d,1)},h=he(ge);return()=>e(ua,{class:"!overflow-visible"},e(aa,{transformOrigin:"center",show:l.value,onUpdateShow:m=>void(l.value=m)},e(ta,{bordered:!1,title:"\u521B\u5EFA Token",class:"max-w-full w-[500px]"},e(E,null,e(r,{label:"\u540D\u79F0",required:!0},e(c,{value:a.name,onInput:m=>void(a.name=m)})),e(r,{label:"\u662F\u5426\u8FC7\u671F"},e(k,{value:a.expired,onUpdateValue:m=>void(a.expired=m)})),e(r,{label:"\u8FC7\u671F\u65F6\u95F4"},e(Fa,{disabled:!a.expired,value:a.expiredTime,type:"datetime",onUpdateValue:m=>void(a.expiredTime=new Date(m))}))),e(ee,null,e(C,{round:!0,onClick:()=>void(l.value=!1)},"\u53D6\u6D88"),e(C,{round:!0,type:"primary",onClick:i},"\u786E\u5B9A")))),e(C,{class:"absolute right-0 top-[-3rem]",round:!0,type:"primary",onClick:()=>{l.value=!0}},e(Ze,null,e(ea,null)),e("span",{class:"ml-2"},"\u65B0\u589E")),e(ga,{scrollX:Math.max(800,h.contentWidth.value-h.contentInsetWidth.value),remote:!0,bordered:!1,data:u.value,columns:[{key:"name",title:"\u540D\u79F0"},{key:"token",title:"Token",render({token:m}){return m??"*".repeat(40)}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"created",render({created:m}){return e(Fe,{time:m})}},{title:"\u8FC7\u671F\u65F6\u95F4",key:"expired",render({expired:m}){return Xe(m,"yyyy\u5E74M\u6708d\u65E5 HH:mm:ss")}},{title:"\u64CD\u4F5C",key:"id",render({id:m,name:d}){return e(ee,null,e(Ea,{positiveText:"\u53D6\u6D88",negativeText:"\u5220\u9664",onNegativeClick:()=>{n(m)}},{trigger:()=>e(C,{text:!0,type:"error"},"\u5220\u9664"),default:()=>e("span",{class:"max-w-48"},'\u786E\u5B9A\u8981\u5220\u9664 Token "',d,'"?')}))}}]}))}),Ma=A(()=>{const u=te({password:"",reenteredPassword:""}),v=I(),a=Ee(),s=async()=>{!v.value||v.value.validate(async i=>{i?console.log(i):(await S.api.master.patch({data:{password:u.password}}),message.success("\u66F4\u6539\u6210\u529F"),la(),a.push({name:na.Login}))})};function l(i,n){return console.log(i),n===u.password}return()=>e(E,{class:"max-w-[300px]",ref:v,model:u,rules:{password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],reenteredPassword:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801",trigger:["input","blur"]},{validator:l,message:"\u4E24\u6B21\u5BC6\u7801\u8F93\u5165\u4E0D\u4E00\u81F4",trigger:["blur","password-input"]}]}},e(r,{label:"\u65B0\u5BC6\u7801",required:!0,path:"password"},e(c,{...g,value:u.password,onInput:i=>void(u.password=i),type:"password"})),e(r,{label:"\u91CD\u590D\u5BC6\u7801",required:!0,path:"reenteredPassword"},e(c,{...g,value:u.reenteredPassword,onInput:i=>void(u.reenteredPassword=i),type:"password"})),e("div",{class:"w-full text-right"},e(C,{onClick:s,type:"primary",round:!0},"\u4FDD\u5B58")))}),$a=A({props:{value:{type:Object,required:!0},onChange:{type:Function,required:!0},options:{type:Array,required:!1}},setup(u){let v=q(u.value)?null:u.value;const a=R(()=>u.value,l=>{if(!v&&l){const i=Object.entries(l).map(([n,h])=>({key:n,value:h.toString()}));s.value=i,a()}}),s=I([]);return R(()=>s.value,l=>{const i=l.reduce((n,h)=>(h.key===""&&h.value===""||(n[h.key]=h.value.toString()),n),{});u.onChange(i)},{deep:!0}),()=>e(Ua,{value:s.value,onUpdateValue:l=>{s.value=(()=>{const i=l.findIndex(n=>n===null);return i!==-1&&l.splice(i,1,{key:"",value:""}),l})()}},{default(l){return e("div",{class:"flex items-center w-full"},e(Ba,{class:"mr-4",filterable:!0,tag:!0,placeholder:"\u8BF7\u9009\u62E9",value:l.value.key,onUpdateValue:i=>{l.value.key=i},options:u.options}),e(c,{value:l.value.value.toString(),onUpdateValue:i=>{l.value.value=i}}))}})}}),fe={GitHub:"github",Weibo:"weibo",\u7F51\u6613\u4E91:"netease",\u54D4\u54E9\u54D4\u54E9:"bilibili"},za="_avatar_7rrjr_3";var be={"tab-user":"_tab-user_7rrjr_1",avatar:za};const Ga=A(()=>{const u=I({});let v;async function a(){const n=await S.api.master.get();u.value=n,v={...n}}X(async()=>{await a()});const s=oa(),l=T(()=>we(v,u.value)),i=async()=>{const n=Ie(ia(l));n.socialIds&&(n.socialIds=u.value.socialIds),await S.api.master.patch({data:n}),s.success("\u4FDD\u5B58\u6210\u529F~"),await a()};return()=>e(ue,null,e(Z,{cols:"1 400:1 600:2",class:be["tab-user"],xGap:20,yGap:20},e(Q,null,e(E,{class:"flex flex-col justify-center items-center "},e(r,null,e("div",{class:be.avatar},e(ra,{src:u.value.avatar,size:200}))),e(r,{label:"\u4E0A\u6B21\u767B\u9646\u65F6\u95F4",class:"!mt-4"},e("div",{class:"text-center w-full"},e(M,null,u.value.lastLoginTime?e(Fe,{time:u.value.lastLoginTime}):"N/A"))),e(r,{label:"\u4E0A\u6B21\u767B\u9646\u5730\u5740"},e("div",{class:"text-center w-full"},u.value.lastLoginIp?e(sa,{trigger:"hover",ip:u.value.lastLoginIp,triggerEl:e(M,{class:"cursor-pointer"},u.value.lastLoginIp)}):"N/A")),e(r,null,e(C,{round:!0,class:"-mt-14",type:"primary",onClick:i,disabled:q(l.value)},"\u4FDD\u5B58")))),e(Q,null,e(E,null,e(r,{label:"\u4E3B\u4EBA\u540D (username)"},e(c,{value:u.value.username,onInput:n=>{u.value.username=n?.trim()||""}})),e(r,{label:"\u4E3B\u4EBA\u6635\u79F0 (name)"},e(c,{value:u.value.name,onInput:n=>{u.value.name=n?.trim()||""}})),e(r,{label:"\u4E3B\u4EBA\u90AE\u7BB1 (mail)"},e(c,{value:u.value.mail,onInput:n=>{u.value.mail=n}})),e(r,{label:"\u4E2A\u4EBA\u9996\u9875"},e(c,{value:u.value.url,onInput:n=>{u.value.url=n}})),e(r,{label:"\u5934\u50CF"},e(c,{value:u.value.avatar,onInput:n=>{u.value.avatar=n}})),e(r,{label:"\u4E2A\u4EBA\u4ECB\u7ECD"},e(c,{type:"textarea",resizable:!1,value:u.value.introduce,onInput:n=>{u.value.introduce=n}})),e(r,{label:"\u793E\u4EA4\u5E73\u53F0 ID \u5F55\u5165"},e($a,{options:Object.keys(fe).map(n=>({label:n,value:fe[n]})),onChange:n=>{u.value.socialIds=n},value:u.value.socialIds||{}}))))))});var Ft=A({setup(){const u=pa(),v=Ee(),a=I(u.params.type);R(()=>u.params.type,l=>{!l||(a.value=l)});const s=I(null);return()=>e(da,{actionsElement:s.value},e(Ia,{value:a.value,onUpdateValue:l=>{v.replace({...u,params:{...u.params,type:l}})}},e(J,{tab:"\u7528\u6237",name:"user"},e(Ga,null)),e(J,{tab:"\u7CFB\u7EDF",name:"system"},e(Ka,null)),e(J,{tab:"\u5B89\u5168",name:"security"},e(La,null))))}});export{Ft as default};
