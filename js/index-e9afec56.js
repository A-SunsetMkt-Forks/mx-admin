import{a as f,u as g}from"./use-async-monaco-0de6175d.js";import{d as b,eh as s,x as h,w as y,h as a,dw as p,N as S,n as w,R as N}from"./index-e5a974ac.js";import{T}from"./two-col-fef7a5ba.js";import{E as m}from"./types-4fa065e6.js";import{N as C}from"./Form-39cf4ae1.js";import{N as v}from"./FormItem-aa7b00b7.js";import{N as i}from"./Select-f739eb48.js";import"./index-c099089b.js";import"./editor.main-b3980297.js";import"./use-save-confirm-f4fcedfe.js";import"./index-2607d3f6.js";import"./Tag-a4a9fc2d.js";const E=t=>{switch(t){case"objectId":return((o=Math,r=Date,n=16,l=u=>o.floor(u).toString(n))=>l(r.now()/1e3)+" ".repeat(n).replace(/./g,()=>l(o.random()*n)))();case"now":return new Date().toISOString();case"randomtext":return btoa(Math.random().toString()).substring(10,5);case"randomnumber":return Math.floor(Math.random()*1e4);default:return"{{"+t+"}}"}};var P=b({setup(){const t=s("debug-event-name",m.POST_CREATE),o=s("debug-event",{}),r=s("debug-event-type","web"),n=f({value:o.value[t.value]??""}),l=h();y(()=>t.value,e=>{u.editor.setValue(o.value[e]||"")});const u=g(l,n,e=>{o.value={...o.value,[t.value]:e}},{language:"json",unSaveConfirm:!1}),c=async()=>{const e=o.value[t.value]?.replace(/(\{\{(.*?)\}\})/g,(M,x,d)=>E(d))??"";console.log(e),N.api.debug.events.post({params:{type:r.value,event:t.value},data:JSON.parse(e)})};return()=>a(w,null,a(T,null,a(p,{span:"12"},a(C,null,a(v,{label:"Type"},a(i,{tag:!0,filterable:!0,value:r.value,onUpdateValue:e=>void(r.value=e),options:["web","all","admin"].map(e=>({value:e,label:e}))})),a(v,{label:"Event"},a(i,{tag:!0,filterable:!0,value:t.value,onUpdateValue:e=>void(t.value=e),options:Object.keys(m).map(e=>({value:e,label:e}))}))),a("div",null,a(S,{type:"primary",onClick:c},"\u6D4B\u8BD5"))),a(p,{span:"24"},a("div",{class:"h-[calc(100vh-20rem)] relative"},a("div",{ref:l,class:"h-full"})))))}});export{P as default};
